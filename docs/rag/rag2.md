---
sidebar_position: 2
---

# ACRA Point 메뉴얼 RAG 도입기

## 관리자 메뉴얼 RAG 도입 배경
---

### 기존 메뉴얼의 한계점

ACRA Point의 관리자 메뉴얼은 전통적인 정적 문서였습니다.  
그래서 사용자들이 필요한 정보를 찾기 위해서는 긴 문서 안에서 필요한 정보를 탐색했어야만 했습니다.  
정확한 키워드를 알지 못하면 원하는 답을 얻기 어려웠습니다.

그래서 메뉴얼이 있음에도 불구하고 자잘한 기능에 대한 문의가 와서 불필요한 인력 소모가 존재했습니다.  
사용자들의 단어로 최대한 원하는 기능을 제공해보고자 RAG를 도입하게 됐습니다.


## 선정 기술
---

### LangChain

저희는 LangChain 프레임워크를 사용했습니다.  
LangChain을 사용하게 된 이유는 당시에 유일하게 JavaScript/TypeScript를 지원하고 있었던 것이 컸습니다.  

이 점 말고도 LangChain은 다양한 모델을 간편하게 바꿀 수 있게 추상화가 잘 돼있어서 개발할 때 편리함을 얻을 수 있습니다.

### FAISS

Vector Store로는 FAISS를 사용했습니다.  
오픈소스 중에 성능도 괜찮고 설치에 어려운 부분이 있지도 않아서 FAISS를 선택했습니다.  


### Gemini-1.5-Flash

LLM 모델은 최종적으로 `Gemini-1.5-Flash`를 사용했습니다.  
많고 많은 모델 중 왜 `Gemini-1.5-Flash`를 사용했냐면 ... 모릅니다. 무료여서? Chrome AI 때문에?


## 초기 구현과 시행착오
---

### 초기 구현

초기에는 ChatGPT를 이용해서 구현해봤습니다.

ACRA Point 메뉴얼 문서에는 그림과 표들이 많았습니다.  
원래 RAG를 사용할 때 그림과 표들도 탐지하여 임베딩 할 수 있지만 이걸 위해 투입되는 자원보다 글로 다시 작성하는게 효율적이였어서 그림과 표로 되어있는 일부분을 글자로 다시 작성한 후 진행했습니다.

초기에 생각한 방식은 다음과 같습니다.

표가 있었던 이유는 속성값을 정의하기 위해 있었으니. 이 부분만 특별한 방식으로 작성해서 메타데이터로 저장해놓자는게 처음 생각이였습니다.  
PDF를 불러오고 Chunk를 분할할 때 메타데이터도 넣을 수 있어서 어렵지는 않았지만 다음과 같은 문제가 있었습니다.

1. 만약 이 메타데이터가 다음 chunk에도 필요한 경우에는 곤란하다.
2. 메타 데이터로 이용하는게 내용으로 있는 것 보다 부자연스럽다.

그래서 그냥 평문으로 다 작성하기로 했습니다.

예를 들어서 아래와 같은 표가 있었다고 할 때

| 속성 | 값 |
|-------|-------|
| 이름 | 관리자 이름 |
| 비밀번호 | 관리자 비밀번호 |


아래와 같이 풀어써줬습니다..

```
이름은 관리자 이름을 의미합니다.
비밀번호는 관리자 비밀번호를 의미합니다.
```


이런 문서를 PDF로 만들어서 Load하고 Chunk로 나눠서 Vector Store에 저장하고 사용했을 때 답변을 잘 해줬습니다.